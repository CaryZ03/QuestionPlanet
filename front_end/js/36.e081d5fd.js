"use strict";(self["webpackChunkquestion_planet"]=self["webpackChunkquestion_planet"]||[]).push([[36],{5036:function(t,e,s){s.r(e),s.d(e,{default:function(){return r}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"question-card",staticStyle:{margin:"0 0 0 -62px"},attrs:{id:"question-list"}},[e("el-container",{staticClass:"card mb-2",staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[e("el-main",[e("span",{staticStyle:{color:"#F3F2F2"}},[t._v("问卷标题："+t._s(this.qn_title))])])],1),e("div",{staticStyle:{"line-height":"30px"}},[t._v(" ")]),t._l(t.questions,(function(s,i){return e("div",{key:i,staticClass:"card mb-2",attrs:{id:s.id}},[e("el-container",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[e("el-main",[s.q_mandatory?e("span",{staticClass:"red_star"},[t._v("* ")]):e("span",{staticClass:"red_star"}),"single"===s.q_type?e("span",{staticStyle:{color:"#F3F2F2"}},[t._v(t._s(i+1)+".单选题")]):t._e(),"multiple"===s.q_type?e("span",{staticStyle:{color:"#F3F2F2"}},[t._v(t._s(i+1)+".多选题")]):t._e(),"text"===s.q_type?e("span",{staticStyle:{color:"#F3F2F2"}},[t._v(t._s(i+1)+".填空题")]):t._e(),"judge"===s.q_type?e("span",{staticStyle:{color:"#F3F2F2"}},[t._v(t._s(i+1)+".判断题")]):t._e(),"grade"===s.q_type?e("span",{staticStyle:{color:"#F3F2F2"}},[t._v(t._s(i+1)+".打分题")]):t._e(),e("div",{staticStyle:{"line-height":"30px"}},[t._v(" ")]),e("div",{staticStyle:{color:"#F3F2F2"}},[t._v("题目："+t._s(s.q_title))]),e("div",{staticStyle:{"line-height":"30px"}},[t._v(" ")]),"single"===s.q_type||"multiple"===s.q_type?e("div",[e("div",{staticClass:"division"},[e("span",{staticClass:"title",staticStyle:{color:"#F3F2F2"}},[t._v("选项")])]),"single"===s.q_type?e("div",[e("el-radio-group",{model:{value:s.a_content,callback:function(e){t.$set(s,"a_content",e)},expression:"question.a_content"}},t._l(s.q_options,(function(s,i){return e("el-radio",{key:i,staticStyle:{color:"#F3F2F2"},attrs:{label:i}},[t._v(t._s(s.label))])})),1)],1):t._e(),"multiple"===s.q_type?e("div",t._l(s.q_options,(function(s,i){return e("div",{key:i},[e("el-checkbox",{staticStyle:{color:"#F3F2F2"},attrs:{label:i},model:{value:s.checked,callback:function(e){t.$set(s,"checked",e)},expression:"option.checked"}},[t._v(t._s(s.label))])],1)})),0):t._e()]):"text"===s.q_type?e("div",[e("div",{staticClass:"division"},[e("span",{staticClass:"title",staticStyle:{color:"#F3F2F2"}},[t._v("内容")])]),e("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:s.a_content,callback:function(e){t.$set(s,"a_content",e)},expression:"question.a_content"}})],1):"judge"===s.q_type?e("div",[e("div",{staticClass:"division"},[e("span",{staticClass:"title",staticStyle:{color:"#F3F2F2"}},[t._v("选项")])]),e("el-radio-group",{model:{value:s.a_content,callback:function(e){t.$set(s,"a_content",e)},expression:"question.a_content"}},[e("el-radio",{staticStyle:{color:"#F3F2F2"},attrs:{label:0}},[t._v("错误")]),e("el-radio",{staticStyle:{color:"#F3F2F2"},attrs:{label:1}},[t._v("正确")])],1)],1):"grade"===s.q_type?e("div",[e("div",{staticClass:"division"},[e("span",{staticClass:"title",staticStyle:{color:"#F3F2F2"}},[t._v("评分")])]),e("el-rate",{attrs:{colors:t.grade_colors},model:{value:s.a_content,callback:function(e){t.$set(s,"a_content",e)},expression:"question.a_content"}})],1):t._e()])],1),e("div",{staticStyle:{"line-height":"30px"}},[t._v(" ")])],1)})),e("el-button",{staticStyle:{margin:"0 0 0 214px"},attrs:{type:"success",round:""},on:{click:function(e){return t.submit_handler()}}},[t._v("保存回答")]),e("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.submit_answer()}}},[t._v("提交回答")])],2),e("router-view")],1)},n=[],a=(s(7658),{name:"createQuestionnaire",data(){return{uid:this.$store.state.curUserID,qn_id:"",as_id:"",qn_title:"这是问卷标题",qn_description:"",qn_end_time:"",qn_refillable:"",questions:[],answer_sheet:[],grade_colors:["#99A9BF","#F7BA2A","#FF9900"]}},created(){this.qn_id=this.$route.params.qn_id,this.load_qn(),this.create_as()},methods:{create_as(){var t=this;this.$api.questionnaire.postQuestionnaire_Fill(this.$route.params.qn_id).then((function(e){console.log(t.qn_id),console.log(e),t.as_id=e.data.as_id,console.log(t.as_id)})).catch((function(t){console.log(t)}))},load_qn(){var t=this;this.$api.questionnaire.getQuestionnaire_Check(this.qn_id).then((function(e){const s=JSON.parse(e.data.qn_info),i=e.data.question_list;console.log(s),t.qn_title=s.qn_title,t.qn_id=s.qn_id,t.qn_end_time=s.qn_end_time,t.qn_description=s.qn_description,t.qn_refillable=s.qn_refillable,i.forEach((e=>{const s=JSON.parse(e);s.q_options=JSON.parse(s.q_options),t.questions.push(s)}))})).catch((function(t){console.log(t)})),console.log(this.qn_id)},submit_handler(){this.answer_sheet.splice(0,this.answer_sheet.length),this.questions.forEach(((t,e)=>{let s=[];"multiple"===t.q_type&&(t.q_options.forEach(((t,e)=>{t.checked&&s.push(e.toString())})),t.a_content=s.join(",")),this.answer_sheet.push({q_id:t.q_id,a_content:t.a_content})})),console.log(this.answer_sheet);const t={qn_id:this.qn_id,as_id:this.as_id,answer_data:JSON.stringify(this.answer_sheet)},e=JSON.stringify(t);console.log(e),this.$api.questionnaire.postAnswer_Submit(e).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},submit_answer(){this.$confirm("是否提交回答?","提交回答",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.submit_handler(),this.$message({type:"success",message:"提交成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消提交"})}))}}}),o=a,l=s(1001),c=(0,l.Z)(o,i,n,!1,null,"183cba28",null),r=c.exports}}]);
//# sourceMappingURL=36.e081d5fd.js.map