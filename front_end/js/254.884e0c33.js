"use strict";(self["webpackChunkquestion_planet"]=self["webpackChunkquestion_planet"]||[]).push([[254],{4254:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"question-card",attrs:{id:"question-list"}},[t("el-container",{staticClass:"card mb-2",staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[t("el-main",[t("span",[e._v("问卷标题："+e._s(this.qn_title))])])],1),e._l(e.questions,(function(s,i){return t("div",{key:i,staticClass:"card mb-2"},[t("el-container",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[t("el-main",[t("span",[e._v("第"+e._s(i+1)+"题："+e._s(s.q_title)+"    ")]),"single"===s.q_type?t("span",{staticClass:"question-type"},[e._v("[单选题]")]):e._e(),"multiple"===s.q_type?t("span",{staticClass:"question-type"},[e._v("[多选题]")]):e._e(),"text"===s.q_type?t("span",{staticClass:"question-type"},[e._v("[填空题]")]):e._e(),"judge"===s.q_type?t("span",{staticClass:"question-type"},[e._v("[判断题]")]):e._e(),t("div",{staticStyle:{"line-height":"30px"}},[e._v(" ")]),"single"===s.q_type||"multiple"===s.q_type?t("el-table",{staticStyle:{width:"100%"},attrs:{data:s.q_options,"show-summary":"","default-sort":{prop:"label.label",order:"ascending"}}},[t("el-table-column",{attrs:{prop:"label.label",label:"选项",sortable:"",width:"500"}}),t("el-table-column",{attrs:{prop:"num",label:"小计",sortable:"",width:"140"}}),t("el-table-column",{attrs:{label:"比例",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.calculatePercentage(t.row.num,e.a_count))+" ")]}}],null,!0)})],1):e._e(),"judge"===s.q_type||"grade"===s.q_type?t("el-table",{staticStyle:{width:"100%"},attrs:{data:s.q_options,"show-summary":"","default-sort":{prop:"label.label",order:"ascending"}}},[t("el-table-column",{attrs:{prop:"label ",label:"选项",sortable:"",width:"500"}}),t("el-table-column",{attrs:{prop:"num",label:"小计",sortable:"",width:"140"}}),t("el-table-column",{attrs:{label:"比例",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.calculatePercentage(t.row.num,e.a_count))+" ")]}}],null,!0)})],1):e._e(),"text"===s.q_type?t("div",[t("div",{staticClass:"division"},[t("span",{staticClass:"title"},[e._v("内容")])]),t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:s.a_content,callback:function(t){e.$set(s,"a_content",t)},expression:"question.a_content"}})],1):e._e()],1),t("el-footer",[t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.change_to_bar(i)}}},[e._v("柱状图")]),e._v("    "),t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.change_to_line(i)}}},[e._v("折线图")]),e._v("    "),t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.change_to_pie(i)}}},[e._v("饼状图")]),e._v("    "),t("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.change_to_ring(i)}}},[e._v("圆环图")])],1),e.isBar?t("div",{staticClass:"echart",style:e.myChartStyle,attrs:{id:"barChart-"+i}}):e.isLine?t("div",{staticClass:"echart",style:e.myChartStyle,attrs:{id:"lineChart-"+i}}):e.isPie?t("div",{staticClass:"echart",style:e.myChartStyle,attrs:{id:"pieChart-"+i}}):e.isRing?t("div",{staticClass:"echart",style:e.myChartStyle,attrs:{id:"ringChart-"+i}}):e._e()],1),t("div",{staticStyle:{"line-height":"30px"}},[e._v(" ")])],1)}))],2)])},a=[],n=s(2210),r={data(){return{qn_title:"这是一个问卷名称",isBar:!0,isLine:!1,isPie:!1,isRing:!1,a_count:0,questions:[],myChartStyle:{float:"left",width:"100%",height:"400px"}}},beforeRouteLeave(e,t,s){console.log("Leaving"),this.$store.state.isAnalyzing=!1,this.$store.state.is_creating=!1,s()},created(){this.load_qn()},mounted(){this.$store.state.showMultiImg=!1},watch:{questions:{deep:!0,handler(){this.drawBarCharts(),this.drawLineCharts(),this.drawPieCharts(),this.drawRingCharts()}}},methods:{load_qn(){var e=this;this.$api.data.getQuestionnaire_Analyze(this.$store.state.analyzingNumID).then((function(t){console.log(t),console.log(t.data.result),console.log(t.data.result.questionnaire_title),e.qn_title=t.data.result.questionnaire_title,e.a_count=t.data.result.answersheet_count,e.questions=t.data.result.q_results})).catch((function(e){console.log(e)}))},drawBarCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const s="barChart-"+t,i=document.getElementById(s);console.log(i);const a=n.S1(i),r={xAxis:{data:e.q_options.map((e=>e.label.label))},yAxis:{},series:[{type:"bar",data:e.q_options.map((e=>e.num))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}else if("judge"===e.q_type||"grade"===e.q_type){const s="barChart-"+t,i=document.getElementById(s);console.log(i);const a=n.S1(i),r={xAxis:{data:e.q_options.map((e=>e.label))},yAxis:{},series:[{type:"bar",data:e.q_options.map((e=>e.num))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}}))},drawLineCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const s="lineChart-"+t,i=document.getElementById(s),a=n.S1(i),r={xAxis:{data:e.q_options.map((e=>e.label.label))},yAxis:{},series:[{type:"line",data:e.q_options.map((e=>e.num))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}else if("judge"===e.q_type||"grade"===e.q_type){const s="lineChart-"+t,i=document.getElementById(s),a=n.S1(i),r={xAxis:{data:e.q_options.map((e=>e.label))},yAxis:{},series:[{type:"line",data:e.q_options.map((e=>e.num))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}}))},drawPieCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const s="pieChart-"+t,i=document.getElementById(s),a=n.S1(i),r={series:[{type:"pie",data:e.q_options.map((e=>({name:e.label.label,value:e.num})))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}else if("judge"===e.q_type||"grade"===e.q_type){const s="pieChart-"+t,i=document.getElementById(s),a=n.S1(i),r={series:[{type:"pie",data:e.q_options.map((e=>({name:e.label,value:e.num})))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}}))},drawRingCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const s="ringChart-"+t,i=document.getElementById(s),a=n.S1(i),r={series:[{type:"pie",radius:["50%","70%"],data:e.q_options.map((e=>({name:e.label.label,value:e.num})))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}else if("judge"===e.q_type||"grade"===e.q_type){const s="ringChart-"+t,i=document.getElementById(s),a=n.S1(i),r={series:[{type:"pie",radius:["50%","70%"],data:e.q_options.map((e=>({name:e.label,value:e.num})))}]};a.setOption(r),window.addEventListener("resize",(()=>{a.resize()}))}}))},destroyBarCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const e="barChart-"+t,s=document.getElementById(e),i=n.JE(s);i.dispose(),window.removeEventListener("resize",(()=>{i.resize()}))}}))},destroyLineCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const e="lineChart-"+t,s=document.getElementById(e),i=n.JE(s);i.dispose(),window.removeEventListener("resize",(()=>{i.resize()}))}}))},destroyPieCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const e="pieChart-"+t,s=document.getElementById(e),i=n.JE(s);i.dispose(),window.removeEventListener("resize",(()=>{i.resize()}))}}))},destroyRingCharts(){this.questions.forEach(((e,t)=>{if("single"===e.q_type||"multiple"===e.q_type){const e="ringChart-"+t,s=document.getElementById(e),i=n.JE(s);i.dispose(),window.removeEventListener("resize",(()=>{i.resize()}))}}))},change_to_bar(e){this.isLine=!1,this.isPie=!1,this.isRing=!1,this.isBar=!0,setTimeout((()=>{this.drawBarCharts()}),100)},change_to_line(e){this.isPie=!1,this.isRing=!1,this.isBar=!1,this.isLine=!0,setTimeout((()=>{this.drawLineCharts()}),100)},change_to_pie(e){this.isLine=!1,this.isPie=!0,this.isRing=!1,this.isBar=!1,setTimeout((()=>{this.drawPieCharts()}),100)},change_to_ring(e){this.isLine=!1,this.isPie=!1,this.isRing=!0,this.isBar=!1,setTimeout((()=>{this.drawRingCharts()}),100)},calculatePercentage(e,t){return(e/t*100).toFixed(2)+"%"}}},l=r,o=s(1001),d=(0,o.Z)(l,i,a,!1,null,"1eb66d1e",null),p=d.exports}}]);
//# sourceMappingURL=254.884e0c33.js.map